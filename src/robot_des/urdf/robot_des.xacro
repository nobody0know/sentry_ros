<?xml version="1.0" encoding="utf-8"?>
<!-- This URDF was automatically created by SolidWorks to URDF Exporter! Originally created by Stephen Brawner (brawner@gmail.com) 
     Commit Version: 1.6.0-4-g7f85cfe  Build Version: 1.6.7995.38578
     For more information, please see http://wiki.ros.org/sw_urdf_exporter -->
<robot name="robot_des" xmlns:xacro="http://www.ros.org/wiki/xacro">
<link name="base_footprint"/>

  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0.0 0.0 0.010" rpy="0 0 0"/>
  </joint>


  <link
    name="base_link">
    <inertial>
      <origin
        xyz="-0.000428130552795045 -0.021915627601754 -0.0133698422525095"
        rpy="0 0 0" />
      <mass
        value="4.68126788295179" />
      <inertia
        ixx="0.0145873193919006"
        ixy="-6.80283507311823E-06"
        ixz="3.04984884541059E-07"
        iyy="0.0124505441321933"
        iyz="-1.59907342304969E-06"
        izz="0.0234128160904748" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>

  <link
    name="br_Link">
    <inertial>
      <origin
        xyz="-0.020848 -3.9989E-05 2.0411E-05"
        rpy="0 0 0" />
      <mass
        value="0.55255" />
      <inertia
        ixx="0.00080273"
        ixy="1.1803E-11"
        ixz="-1.5327E-11"
        iyy="0.0004545"
        iyz="-5.0114E-08"
        izz="0.00045447" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/br_Link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/br_Link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="br_Joint"
    type="continuous">
    <origin
      xyz="0.196 -0.22435 -0.088559"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="br_Link" />
    <axis
      xyz="-1 0 0" />
  </joint>
  <link
    name="bl_Link">
    <inertial>
      <origin
        xyz="0.020846 7.6231E-06 4.4129E-05"
        rpy="0 0 0" />
      <mass
        value="0.55331" />
      <inertia
        ixx="0.00080295"
        ixy="1.0192E-11"
        ixz="-2.7175E-12"
        iyy="0.00045391"
        iyz="1.078E-08"
        izz="0.00045401" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/bl_Link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/bl_Link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="bl_Joint"
    type="continuous">
    <origin
      xyz="-0.1955 -0.22436 -0.088723"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="bl_Link" />
    <axis
      xyz="-1 0 0" />
  </joint>
  <link
    name="fl_Link">
    <inertial>
      <origin
        xyz="0.0208481813735867 3.99885874501349E-05 2.04113600184366E-05"
        rpy="0 0 0" />
      <mass
        value="0.55254578668872" />
      <inertia
        ixx="0.000802726596049636"
        ixy="1.18500278027883E-11"
        ixz="1.53838222395849E-11"
        iyy="0.000454501228594865"
        iyz="5.01136294840854E-08"
        izz="0.000454465356701135" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/fl_Link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/fl_Link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="fl_Joint"
    type="continuous">
    <origin
      xyz="-0.1955 0.22435 -0.088559"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="fl_Link" />
    <axis
      xyz="-1 0 0" />
  </joint>
  <link
    name="fr_Link">
    <inertial>
      <origin
        xyz="-0.020846 -7.6231E-06 4.4129E-05"
        rpy="0 0 0" />
      <mass
        value="0.55331" />
      <inertia
        ixx="0.00080295"
        ixy="1.0157E-11"
        ixz="2.7635E-12"
        iyy="0.00045391"
        iyz="-1.078E-08"
        izz="0.00045401" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/fr_Link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/fr_Link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="fr_Joint"
    type="continuous">
    <origin
      xyz="0.1955 0.22436 -0.088723"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="fr_Link" />
    <axis
      xyz="-1 0 0" />
  </joint>
  <link
    name="Laser_Link">
    <inertial>
      <origin
        xyz="0.015522 -0.0055646 0.017092"
        rpy="0 0 0" />
      <mass
        value="0.05542" />
      <inertia
        ixx="2.3939E-05"
        ixy="-9.4643E-08"
        ixz="-4.9424E-08"
        iyy="2.4757E-05"
        iyz="-3.542E-08"
        izz="3.5106E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/Laser_Link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.29412 0.29412 0.29412 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/Laser_Link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="Laser_Joint"
    type="fixed">
    <origin
      xyz="0 0.12413 -0.0564"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="Laser_Link" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="yuntai_Link">
    <inertial>
      <origin
        xyz="0.0083948 -0.0058886 0.13583"
        rpy="0 0 0" />
      <mass
        value="0.6" />
      <inertia
        ixx="0.002496"
        ixy="0.00022558"
        ixz="0.00018923"
        iyy="0.0038292"
        iyz="-3.2189E-05"
        izz="0.0042073" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/yuntai_Link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://robot_des/meshes/yuntai_Link.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="yuntai_Joint"
    type="continuous">
    <origin
      xyz="0 0 0.07475"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="yuntai_Link" />
    <axis
      xyz="0 0 1" />
  </joint>

 <!-- 传动装置 tran1 ，joint ：swivel_J0 的  --> 
 <transmission name="yuntai"><!-- 名字自定义  --> 
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="yuntai_Joint"><!-- 名字必须与swivel_J0对应一致  --> 
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor1"><!-- 名字自定义  --> 
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>


<gazebo>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
        <robotNamespace>/</robotNamespace>
    <controlPeriod>0.01</controlPeriod>
    <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
    </plugin>
</gazebo>

  <!-- hokuyo -->
  <gazebo reference="Laser_Link">
    <sensor type="ray" name="head_hokuyo_sensor">
      <pose>0 0 0 0 0 0</pose>
      <visualize>false</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>720</samples>  //采样雷达发射一周要发射1081个射线，说明采样了1081次
            <resolution>1</resolution>  //分辨率，在这里指的是雷达每1个射线就有测距
            <min_angle>-3.1415926</min_angle> //设置雷达的采样范围，单位是弧度，以正前方为圆的中轴分界线，然后min就是以中轴为起点，向左转-2.35...个弧度
            <max_angle>3.1415926</max_angle>  //max就是以中轴为起点，向右转2.35...个弧度
          </horizontal>
        </scan>
        <range>
          <min>0.4</min>
          <max>5.0</max>
          <resolution>0.01</resolution> //分辨率，在这里指的是雷达的有效范围，精度为0.01m
        </range>
        <noise>
          <type>gaussian</type>   //高斯噪音，主要是为了仿真
          <!-- Noise parameters based on published spec for Hokuyo laser
               achieving "+-30mm" accuracy at range < 10m.  A mean of 0.0m and
               stddev of 0.01m will put 99.7% of samples within 0.03m of the true
               reading. -->
          <mean>0.0</mean>
          <stddev>0.01</stddev>  //加入高斯噪音主要就是模拟误差的情况的，我们最终在仿真环境下测量障碍物的距离可能不是实际的那么精确
        </noise>
      </ray>
      <plugin name="gazebo_ros_head_hokuyo_controller" filename="libgazebo_ros_laser.so">
        <topicName>/scan_raw</topicName>
        <frameName>Laser_Link</frameName>
      </plugin>
    </sensor>
  </gazebo>

  <xacro:macro name="joint_trans" params="joint_name">
        <!-- Transmission is important to link the joints and the controller -->
        <transmission name="${joint_name}_trans">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${joint_name}">
                <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
            </joint>
            <actuator name="${joint_name}_motor">
                <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
    </xacro:macro>
 
    <!-- 每一个驱动轮都需要配置传动装置 -->
    <xacro:joint_trans joint_name="fl_Joint" />
    <xacro:joint_trans joint_name="bl_Joint" />
    <xacro:joint_trans joint_name="fr_Joint" />
    <xacro:joint_trans joint_name="br_Joint" />

<gazebo>
    <plugin name="imu_plugin" filename="libgazebo_ros_imu.so">
      <alwaysOn>true</alwaysOn>
      <bodyName>base_link</bodyName>
      <topicName>imu</topicName>
      <serviceName>imu_service</serviceName>
      <gaussianNoise>0.0</gaussianNoise>
      <updateRate>50.0</updateRate>
    </plugin>
  </gazebo>
  <!-- Drive controller -->
<gazebo>

<plugin name="mecanum_controller" filename="libgazebo_ros_planar_move.so">
  <alwaysOn>true</alwaysOn>
  <updateRate>100.0</updateRate>
  <commandTopic>cmd_vel</commandTopic>
  <robotNamespace>/</robotNamespace>
  <odometryTopic>odom_</odometryTopic>
  <odometryFrame>odom</odometryFrame>
  <publishOdomTf>false</publishOdomTf>
  <broadcastTF>false</broadcastTF>
  <robotBaseFrame>base_footprint</robotBaseFrame>
  <updateRate>30</updateRate>
  <leftFrontJoint>fl_Joint</leftFrontJoint>
  <rightFrontJoint>fr_Joint</rightFrontJoint>
  <leftRearJoint>bl_Joint</leftRearJoint>
  <rightRearJoint>br_Joint</rightRearJoint>
  <wheelSeparation>0.160</wheelSeparation>
  <wheelDiameter>0.066</wheelDiameter>
  <wheelAcceleration>1</wheelAcceleration>
  <wheelTorque>10</wheelTorque>
</plugin>

</gazebo>
</robot>